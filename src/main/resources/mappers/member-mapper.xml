<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="memberMapper">
<resultMap type="MemberDto" id="memberResult">
	<id column="USER_NO" property="userNo"/>
	<result column="USER_NAME" property="userName"/>
	<result column="USER_ID" property="userId"/>
	<result column="USER_PWD" property="userPwd"/>
	<result column="PHONE" property="phone"/>
	<result column="ADDRESS" property="address"/>
	<result column="ACCOUNT_NO" property="accountNo"/>
	<result column="BANK" property="bank"/>
	<result column="EMAIL" property="email"/>
	<result column="PROFILE_URL" property="profileURL"/>
	<result column="COUNT_FAIL" property="countFail"/>
	<result column="VACATION_COUNT" property="vacationCount"/>
	<result column="AUTH_LEVEL" property="authLevel"/>
	<result column="SALARY" property="salary"/>
	<result column="TEAM_NO" property="teamNo"/>
	<result column="POSITION_NO" property="positionNo"/>
</resultMap>

  <!--  회원 로그인  -->
	<select id="selectMember" resultMap="memberResult"> 
		select USER_NO , USER_NAME , USER_ID , USER_PWD , PHONE , ADDRESS , ACCOUNT_NO , BANK , EMAIL , PROFILE_URL , COUNT_FAIL , VACATION_COUNT , AUTH_LEVEL , SALARY , TEAM_NO , POSITION_NO 
		from member
		where 
		user_id = #{ userId } 
		and user_pwd = #{ userPwd } 
		and status = 'Y' 
	</select>
 
	<!-- 회원 아이디 찾기 -->
	<select id="selectUserId" resultType="String">
		select user_id
		from member
		where
			user_no = #{ userNo }
			and status = 'Y'
	</select>

	<!-- 회원 프로필 이미지 변경 -->
	<update id="updateProfile">
		update
			member
		set
			profile_url = #{ profileURL }
		where
			user_no = #{ userNo }
	</update>
 
</mapper>
